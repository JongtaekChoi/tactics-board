# 다중 페이지 전술판 시스템 상세 설계 (v1.2.0) 🎯 업데이트

> **핵심 아이디어**: 기존 전술판을 여러 페이지로 확장하여 패턴 연습을 구현하는 혁신적 접근법

---

## 📋 혁신적 접근법: 다중 페이지 전술판

### 🎯 핵심 아이디어
**"별도 편집기 대신 기존 전술판을 페이지로 확장"**
- 사용자가 익숙한 전술판 인터페이스 그대로 유지
- 페이지 탭으로 1단계→2단계→3단계 전환
- 복잡한 새 UI 학습 없이 즉시 사용 가능

### 기존 접근법 vs 다중 페이지 접근법

| 구분 | 기존 계획 (별도 시스템) | 새 계획 (다중 페이지) |
|------|-------------------|------------------|
| **UI 복잡도** | 새 화면 3개 + 새 컴포넌트들 | 기존 화면 + 페이지 탭만 추가 |
| **학습 비용** | 새 인터페이스 학습 필요 | 기존 UX 그대로 사용 |
| **개발 시간** | 2-3주 | 1-2주 (기존 코드 활용) |
| **유지보수** | 별도 시스템 관리 | 기존 시스템 확장 |
| **일관성** | 다른 UX 패턴 | 완전한 UX 일관성 |

### 🏆 핵심 장점
1. **즉시 사용 가능**: 기존 전술판 사용법과 100% 동일
2. **개발 속도**: 기존 컴포넌트 재사용으로 빠른 구현
3. **UX 일관성**: 앱 전체가 하나의 통일된 경험
4. **확장성**: 향후 기능 추가 시에도 같은 패턴 적용

---

## 🗂️ 간소화된 데이터 구조

### 🎯 핵심 설계 원칙: 기존 BoardData 재활용

```typescript
// 기존 타입 그대로 활용 (src/types/index.ts)
export type BoardData = {
  home: Player[];
  away: Player[];
  ball: Player;
  strokes: Stroke[];
};

// 새로 추가할 패턴 타입 (src/types/pattern.ts)
export interface TacticsPattern {
  id: string;
  name: string;                    // "2:1 패스로 수비 따돌리기"
  description?: string;
  category: PatternCategory;
  pages: TacticsPage[];            // Phase → Page로 명칭 변경
  createdAt: Date;
  updatedAt: Date;
  isFavorite: boolean;
}

export interface TacticsPage {
  id: string;
  pageNumber: number;              // 1, 2, 3...
  title?: string;                  // "1단계: 초기 배치"
  boardData: BoardData;            // 기존 구조 그대로!
  notes?: string;
}

export type PatternCategory =
  | 'buildup'      // 빌드업
  | 'attack'       // 공격
  | 'defense'      // 수비
  | 'setpiece'     // 세트피스
  | 'custom';      // 사용자 정의
```

### 🏆 이 구조의 장점
1. **기존 코드 100% 재사용**: TacticsBoard, useBoardState, useGestures 모두 그대로
2. **데이터 호환성**: 기존 저장 로직, Undo/Redo 시스템 그대로 활용
3. **개발 속도**: 새 컴포넌트 개발 불필요
4. **안정성**: 검증된 코드 기반으로 버그 위험 최소화

### 저장 구조 (`AsyncStorage`)

```typescript
// 키: DRILL_PATTERNS
{
  patterns: DrillPattern[],
  lastModified: Date,
  dataVersion: 1.0
}

// 키: DRILL_FAVORITES
{
  patternIds: string[]
}
```

---

## 🎨 혁신적 UI/UX: 기존 전술판 확장

### 🎯 핵심 설계: "별도 화면 없음"

**기존 BoardScreen을 확장하여 페이지 기능만 추가**

```
기존 BoardScreen
├── 헤더 (그대로)
├── 툴바 (그대로)
├── [NEW] 페이지 탭: [1단계] [2단계] [3단계] [+]
├── 전술판 (그대로)
└── [NEW] 하단 컨트롤: [← 이전] [다음 →] [패턴저장]
```

### 🏆 설계 철학
- **최소한의 변화**: 기존 UI에 탭과 네비게이션만 추가
- **학습 제로**: 새로운 UI 패턴 없음
- **일관성 유지**: 모든 기능이 동일한 인터페이스에서 작동

### 1. 다중 페이지 전술판 UI

```
┌───────────────────────────────────┐
│  ⬅ 홈    전술판: 패스 연습       💾│ ← 기존 헤더 그대로
├───────────────────────────────────┤
│  [이동] [그리기] [실행취소] [다시실행] │ ← 기존 툴바 그대로
├───────────────────────────────────┤
│  📄 [1단계] [2단계] [3단계] [+]    │ ← NEW: 페이지 탭
├───────────────────────────────────┤
│  🏟️ 전술판 (기존과 100% 동일)     │ ← 기존 TacticsBoard
│                                   │
│      [1] ────────→ [2]            │
│                                   │
│            [⚽]                   │
│                                   │
│                 🔴[3]             │
│                                   │
├───────────────────────────────────┤
│  [← 이전 페이지] [다음 페이지 →]   │ ← NEW: 페이지 네비게이션
│  [패턴 저장] [패턴 불러오기]       │
└───────────────────────────────────┘
```

### 🎯 사용 플로우
1. **일반 전술판**: 기존과 100% 동일
2. **패턴 모드**: 상단에 페이지 탭 표시
3. **페이지 전환**: 탭 클릭 또는 하단 네비게이션
4. **패턴 저장**: 모든 페이지를 하나의 패턴으로 저장

### 2. 패턴 라이브러리 접근

**HomeScreen에서 "패턴 연습" 옵션 추가**
```
┌───────────────────────────────────┐
│  축구 전술 보드                    │
├───────────────────────────────────┤
│  📋 새 전술판                      │
│  📚 저장된 전술판                  │
│  🎯 패턴 연습 (NEW)               │ ← 다중 페이지 모드 진입
│  👥 팀 관리                       │
└───────────────────────────────────┘
```

**"패턴 연습" 선택 시**
- 기존 BoardScreen 이동
- 자동으로 페이지 탭 활성화
- 하단에 패턴 네비게이션 표시

### 3. 패턴 관리 모달

**"패턴 불러오기" 버튼 클릭 시**
```
┌───────────────────────────────────┐
│  저장된 패턴 불러오기          ✕  │
├───────────────────────────────────┤
│  🔍 검색                          │
├───────────────────────────────────┤
│  ⭐ 2:1 패스 따돌리기 (3페이지)    │
│  🏃 리턴패스 후 침투 (2페이지)     │
│  ⚽ 오버랩 연계 (4페이지)         │
├───────────────────────────────────┤
│  [새 패턴]                        │
└───────────────────────────────────┘
```

---

## 🏗️ 간소화된 구현 계획 (1-2주)

### 🎯 핵심 원칙: 기존 코드 최대 활용

### Week 1: 페이지 시스템 구현

#### 1.1. 타입 정의 (1일)
- [ ] `src/types/pattern.ts` 생성
  - `TacticsPattern`, `TacticsPage` 인터페이스
  - 기존 `BoardData` 타입 재사용

#### 1.2. 페이지 상태 관리 (2일)
- [ ] `src/hooks/useMultiPageBoard.ts` 생성
  - 페이지별 BoardData 배열 관리
  - 현재 페이지 인덱스 상태
  - 페이지 추가/삭제/전환 기능
- [ ] 기존 `useBoardState` 훅과 통합

#### 1.3. BoardScreen 확장 (2일)
- [ ] 페이지 탭 UI 추가
  - `src/components/ui/PageTabs.tsx`
  - 탭 클릭으로 페이지 전환
- [ ] 하단 네비게이션 추가
  - 이전/다음 페이지 버튼
  - 패턴 저장/불러오기 버튼

### Week 2: 패턴 관리 시스템

#### 2.1. 패턴 서비스 (2일)
- [ ] `src/services/patternService.ts` 생성
  - AsyncStorage 기반 패턴 CRUD
  - 기존 저장 로직 재사용

#### 2.2. 패턴 라이브러리 모달 (2일)
- [ ] 패턴 목록 표시
- [ ] 패턴 선택 및 로드
- [ ] 검색/필터 기능

#### 2.3. HomeScreen 진입점 (1일)
- [ ] "패턴 연습" 옵션 추가
- [ ] 패턴 모드로 BoardScreen 진입

### 🏆 개발 시간 단축 요인
1. **기존 컴포넌트 재사용**: TacticsBoard, useBoardState 그대로
2. **새 화면 없음**: BoardScreen 확장만
3. **검증된 로직**: 저장, Undo/Redo 등 모두 기존 것 활용

---

## 🎬 v1.3.0 확장 계획 (페이지 애니메이션)

### 자동 페이지 전환 시스템
```typescript
// src/hooks/usePageAnimation.ts
const usePageAnimation = (pattern: TacticsPattern) => {
  const [currentPage, setCurrentPage] = useState(0);
  const [isAutoPlaying, setIsAutoPlaying] = useState(false);
  const [speed, setSpeed] = useState(1); // 0.5x, 1x, 2x

  const autoPlay = () => {
    // Page 0 → 1 → 2 → ... 자동 전환
    // 기존 전술판 애니메이션 활용
    // 선수 위치 부드러운 전환
    // 드로잉 페이드 인/아웃
  };

  return { currentPage, isAutoPlaying, speed, autoPlay, pause, next, prev };
};
```

### 페이지 전환 효과
- **선수 이동**: 기존 SharedValue 애니메이션 활용
- **드로잉 전환**: 페이드 아웃/인으로 부드러운 변화
- **페이지 표시**: 현재 페이지 하이라이트
- **자동 재생**: 설정된 간격으로 페이지 자동 전환

---

## 📊 간소화된 데이터 예시

### 다중 페이지 패턴 JSON (기존 BoardData 활용)

```json
{
  "id": "pattern_001",
  "name": "2:1 패스로 수비 따돌리기",
  "description": "2명의 공격수가 1명의 수비수를 패스로 제치는 연습",
  "category": "attack",
  "isFavorite": true,
  "pages": [
    {
      "id": "page_1",
      "pageNumber": 1,
      "title": "1단계: 초기 배치",
      "boardData": {
        "home": [
          { "id": "h1", "x": 100, "y": 200, "side": "home", "label": "1" },
          { "id": "h2", "x": 300, "y": 200, "side": "home", "label": "2" }
        ],
        "away": [
          { "id": "a1", "x": 200, "y": 150, "side": "away", "label": "3" }
        ],
        "ball": { "id": "ball", "x": 100, "y": 200, "side": "ball", "label": "⚽" },
        "strokes": []
      },
      "notes": "1번이 공을 소유한 상태"
    },
    {
      "id": "page_2",
      "pageNumber": 2,
      "title": "2단계: 첫 번째 패스",
      "boardData": {
        "home": [
          { "id": "h1", "x": 100, "y": 200, "side": "home", "label": "1" },
          { "id": "h2", "x": 300, "y": 200, "side": "home", "label": "2" }
        ],
        "away": [
          { "id": "a1", "x": 200, "y": 150, "side": "away", "label": "3" }
        ],
        "ball": { "id": "ball", "x": 300, "y": 200, "side": "ball", "label": "⚽" },
        "strokes": [
          {
            "id": "stroke_1",
            "color": "#4A90E2",
            "width": 3,
            "points": [{"x": 100, "y": 200}, {"x": 300, "y": 200}]
          }
        ]
      },
      "notes": "1번이 2번에게 패스"
    },
    {
      "id": "page_3",
      "pageNumber": 3,
      "title": "3단계: 리턴패스 & 침투",
      "boardData": {
        "home": [
          { "id": "h1", "x": 100, "y": 120, "side": "home", "label": "1" },
          { "id": "h2", "x": 300, "y": 200, "side": "home", "label": "2" }
        ],
        "away": [
          { "id": "a1", "x": 200, "y": 150, "side": "away", "label": "3" }
        ],
        "ball": { "id": "ball", "x": 100, "y": 120, "side": "ball", "label": "⚽" },
        "strokes": [
          {
            "id": "stroke_1",
            "color": "#4A90E2",
            "width": 3,
            "points": [{"x": 300, "y": 200}, {"x": 100, "y": 120}]
          },
          {
            "id": "stroke_2",
            "color": "#2ECC71",
            "width": 2,
            "points": [{"x": 100, "y": 200}, {"x": 100, "y": 120}]
          }
        ]
      },
      "notes": "2번이 1번에게 리턴패스, 1번은 수비 뒤 공간으로 침투"
    }
  ],
  "createdAt": "2025-11-05T00:00:00Z",
  "updatedAt": "2025-11-05T00:00:00Z"
}
```

### 🏆 기존 BoardData 재사용의 장점
- **완벽한 호환성**: 모든 기존 시스템과 100% 호환
- **검증된 안정성**: 이미 검증된 데이터 구조
- **개발 속도**: 새로운 데이터 처리 로직 불필요

---

## 🧪 테스트 체크리스트

### 기능 테스트
- [ ] 페이지 탭 클릭으로 전환 정상 동작
- [ ] 페이지 추가/삭제 정상 동작
- [ ] 기존 전술판 기능 모두 정상 동작 (이동/그리기/Undo/Redo)
- [ ] 페이지별 독립적 상태 관리
- [ ] 패턴 저장/불러오기 데이터 무결성
- [ ] 패턴 라이브러리 모달 정상 동작
- [ ] 홈에서 "패턴 연습" 진입 정상

### 성능 테스트
- [ ] 페이지 전환 시 렉 없음 (기존 애니메이션 활용)
- [ ] 다중 페이지 상태 관리 메모리 효율적
- [ ] 패턴 목록 로딩 부드러움

### UX 테스트
- [ ] 기존 사용자가 즉시 이해 가능 (학습 비용 제로)
- [ ] 페이지 탭 터치 영역 충분
- [ ] 실수로 페이지 삭제 방지
- [ ] 패턴 미저장 시 경고

---

## 💰 수익 모델 연계

### Freemium 전략 (기존과 동일)
- **무료 tier**: 5개 패턴 저장, 3페이지까지
- **프로 tier** ($4.99/월):
  - 무제한 패턴 저장
  - 무제한 페이지 수
  - 자동 재생 기능 (v1.3.0)
- **팀 tier** ($9.99/월):
  - 팀 패턴 라이브러리 공유
  - 다중 사용자 협업

### 다중 페이지 시스템의 장점
- **낮은 진입 장벽**: 기존 사용자가 즉시 사용 가능
- **자연스러운 업그레이드**: 페이지 제한으로 유료 전환 유도
- **확장성**: 향후 기능 추가 시 같은 패턴 적용

---

## 🔗 관련 문서

- [TODO.md](./TODO.md) - 전체 로드맵
- [CLAUDE.md](./CLAUDE.md) - 프로젝트 개요
- [TEAM_MANAGEMENT_PLAN.md](./TEAM_MANAGEMENT_PLAN.md) - 팀 관리 시스템

---

## 📝 개발 노트 (업데이트)

### 🎯 핵심 설계 결정

1. **기존 시스템 확장**:
   - 별도 화면/컴포넌트 개발 없음
   - BoardScreen에 페이지 기능만 추가
   - 모든 기존 로직 100% 재사용

2. **상태 관리 단순화**:
   - 페이지별 BoardData 배열로 관리
   - 기존 useBoardState 훅 확장
   - Undo/Redo 시스템 그대로 활용

3. **개발 속도 최적화**:
   - 검증된 컴포넌트만 사용
   - 새로운 UI 패턴 도입 없음
   - 기존 애니메이션 시스템 활용

### 🏆 이 접근법의 혁신성

- **UX 일관성**: 앱 전체가 하나의 통일된 경험
- **학습 비용 제로**: 기존 사용자가 즉시 활용 가능
- **개발 리스크 최소화**: 검증된 코드 기반
- **향후 확장성**: 모든 기능이 같은 패턴으로 확장 가능

### 미래 확장 아이디어

- 페이지 복사/붙여넣기
- 페이지 드래그 순서 변경
- 페이지별 노트 및 타이머
- 패턴 템플릿 자동 생성

---

**업데이트**: 2025-11-05 (다중 페이지 접근법으로 전면 개편)
**버전**: 2.0
**예상 출시**: v1.2.0 (1-2주 개발 예상)
