# 선수 방향 편집 기능 제안서

> 11월 6일 구현 예정 - 방향 편집 UX 옵션 검토

---

## 🎯 목표
현재 구현된 선수 방향 표시 기능에 편집 기능을 추가하여 사용자가 각 선수의 방향을 자유롭게 조절할 수 있도록 함

---

## 🔄 현재 상태
- ✅ Token 타입에 `rotation?: number` 속성 추가 완료
- ✅ SVG 화살표로 방향 표시 완료
- ✅ 기본값: Home(0°), Away(180°) 설정 완료
- ⏳ 편집 기능 미구현

---

## 💡 UX 옵션 제안

### 옵션 1: 길게 누르기 + 드래그 회전 🔄
```
1. 선수 토큰 길게 누르기 (1초)
2. 회전 모드 진입 (시각적 피드백)
3. 손가락 드래그로 방향 조절
4. 놓으면 해당 방향으로 고정
```

**장점:**
- 직관적이고 자연스러운 제스처
- 별도 UI 요소 불필요
- 정밀한 각도 조절 가능

**단점:**
- 기존 이동 제스처와 충돌 가능성
- 학습 비용 존재

### 옵션 2: 더블탭 + 방향 선택 UI 🎯
```
1. 선수 토큰 더블탭
2. 방향 선택 UI 표시 (8방향 또는 원형 다이얼)
3. 원하는 방향 탭
4. 적용 및 UI 닫기
```

**장점:**
- 명확한 인터페이스
- 실수 방지
- 정확한 방향 설정

**단점:**
- UI가 복잡해짐
- 빠른 편집에 불편

### 옵션 3: 롱프레스 + 원형 제스처 ⭕
```
1. 선수 토큰 길게 누르기
2. 토큰 중심을 기준으로 원형 드래그
3. 드래그 방향이 선수 방향이 됨
4. 실시간 미리보기
```

**장점:**
- 시각적으로 직관적
- 정밀 조절과 빠른 설정 모두 가능
- 미리보기로 결과 확인

**단점:**
- 구현 복잡도 높음
- 작은 화면에서 조작 어려울 수 있음

### 옵션 4: 모드 기반 편집 🛠️
```
1. 툴바에 "회전" 모드 추가
2. 회전 모드에서 토큰 탭하면 45도씩 회전
3. 또는 회전 모드에서 드래그로 자유 회전
```

**장점:**
- 기존 모드 시스템과 일관성
- 명확한 편집 상태
- 다중 선수 편집 가능

**단점:**
- 모드 전환 필요
- 툴바 복잡성 증가

---

## 🎨 시각적 피드백 제안

### 편집 모드 진입 시
- 토큰 외곽에 점선 원 표시
- 화살표 더 강조 (크기 확대 또는 색상 변경)
- 햅틱 피드백

### 회전 중
- 실시간 방향 업데이트
- 각도 정보 표시 (선택사항)
- 8방향 스냅 기능 (45도 단위)

### 완료 시
- 부드러운 애니메이션으로 최종 방향 고정
- 편집 모드 해제 시각 효과

---

## 🔧 기술적 고려사항

### Undo/Redo 통합
```typescript
// 히스토리에 rotation 변경 포함
interface HistoryState {
  // ... 기존 필드들
  tokenRotations: Record<string, number>;
}
```

### 제스처 충돌 방지
- 이동 제스처와 회전 제스처 구분
- 제스처 우선순위 설정
- 임계값 기반 제스처 인식

### 성능 최적화
- 회전 중 과도한 리렌더링 방지
- SharedValue 활용한 부드러운 애니메이션
- 제스처 완료 시에만 상태 업데이트

---

## 📱 모바일 UX 최적화

### 터치 영역
- 최소 44pt 터치 영역 보장
- 터치 정확도 향상을 위한 여백

### 접근성
- VoiceOver/TalkBack 지원
- 대체 편집 방법 (버튼 기반)

### 다양한 화면 크기
- 태블릿에서의 제스처 조정
- 작은 화면에서의 UI 최적화

---

## 🚀 구현 우선순위

### Phase 1 (필수)
- [ ] 기본 회전 편집 기능
- [ ] Undo/Redo 통합
- [ ] 기본 시각 피드백

### Phase 2 (개선)
- [ ] 고급 제스처 (옵션 선택 후)
- [ ] 8방향 스냅 기능
- [ ] 햅틱 피드백

### Phase 3 (향후)
- [ ] 다중 선수 동시 편집
- [ ] 방향 복사/붙여넣기
- [ ] 포메이션별 기본 방향 설정

---

## 💭 추천 조합

**개인 추천: 옵션 1 + 8방향 스냅**
- 길게 누르기로 회전 모드 진입
- 자유 드래그 회전 + 45도 단위 스냅
- 부드러운 애니메이션과 햅틱 피드백

이 조합이 직관적이면서도 정밀한 조작이 가능할 것 같습니다.

---

**작성일**: 2025-11-05
**검토 예정**: 2025-11-06
**구현 목표**: 2025-11-06 오후 배포 전 완료